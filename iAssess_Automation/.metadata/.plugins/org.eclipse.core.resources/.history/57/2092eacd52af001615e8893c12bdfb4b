package com.myvidessa.tst;

import java.util.ArrayList;
import java.util.Properties;
import java.util.logging.Logger;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.support.ui.WebDriverWait;
import org.testng.annotations.BeforeClass;
import org.testng.annotations.Test;

import com.myvidessa.genericMethods.MyvidessaCommanHelperImpl;
import com.myvidessa.genericMethods.MyvidessaCommanImpl;
import com.myvidessa.impl.MyvidessaAddProviderHelperImpl;
import com.myvidessa.impl.MyvidessaAddProviderImpl;
import com.myvidessa.impl.MyvidessaLoadPropertiesFileImpl;
import com.myvidessa.locator.MyvidessaAddProviderLocator;

public class MyvidessaAddProviderTest {

	public WebDriver driver;
	public WebDriverWait wait;
	MyvidessaLoadPropertiesFileImpl loadproperties = new MyvidessaLoadPropertiesFileImpl();
	Properties prop = loadproperties.loadParamPropertiesFile();
	MyvidessaAddProviderHelperImpl providerhelperimpl = new MyvidessaAddProviderImpl();
	MyvidessaCommanHelperImpl commonhelperimpl = new MyvidessaCommanImpl();
	Logger logger = Logger.getLogger("Provista Automation");

	@BeforeClass
	public void setup() {
		logger.info("Launching Browser");
		driver = MyvidessaIntBrowserTest.initializeBrowser(driver, prop);
		driver.manage().window().maximize();
		logger.info("Opening Application now");
		driver.get(prop.getProperty("BASEURLREGISTRATION"));
	}

	@Test(priority = 0)
	public void addProviderWithNoDataFilled() {
		try {
			logger.info("Add Provider with no data");
			providerhelperimpl.addProviderWithNoData(driver);
			String expectedmessage = "Entries marked with asterisk(*) are required. Please make sure you have filled all required fields with valid data.";
			commonhelperimpl.assertVerifyTextOnPage(By.xpath(MyvidessaAddProviderLocator.PROVIDER_ERROR_XPATH), driver,
					expectedmessage);
			logger.info("Error Message is same as expected|| Test Case Passed");
		} catch (Exception e) {
			logger.info("Exception occured|| Test Case Failed");
			logger.info(e.getMessage());
		}

	}

	@Test(priority = 1)
	public void addProviderWithValidData() {
		try {
			logger.info("Add Provider with Valid data in all fields");
			providerhelperimpl.addProviderWithNoData(driver);
			String expectedmessage = "Entries marked with asterisk(*) are required. Please make sure you have filled all required fields with valid data.";
			commonhelperimpl.assertVerifyTextOnPage(By.xpath(MyvidessaAddProviderLocator.PROVIDER_ERROR_XPATH), driver,
					expectedmessage);
			logger.info("Error Message is same as expected|| Test Case Passed");
		} catch (Exception e) {
			logger.info("Exception occured|| Test Case Failed");
			logger.info(e.getMessage());
		}

	}
	private Object[][] validDataToAddProvider()
	{
		Object[][] data=new Object[1][16];
		data[0][1]="";
		return data;
	}
}
